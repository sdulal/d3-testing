<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Data Visualization</title>
    <script type="text/javascript" src="d3/d3.v3.js"></script> <!-- Linking program to the d3.js library-->
</head>
<body>
    <h1>Grapes</h1>
    <script type="text/javascript">
    ////////////////////////////////
    /* PART 1: BASIC SVG */
    ///////////////////////////////

    var w = 800;
    var h = 300;
    var grape = d3.rgb("#411534")

    //create an empty canvas
    var canvas = d3.select("body")
                .append("svg")
                .attr("width", w)
                .attr("height", h);

    var rect = canvas.append("rect")
                    .attr("width", w)
                    .attr("height", h)
                    .attr("x", 0)
                    .attr("y", 0)
                    .attr("fill", grape);

    canvas.append("text")
            .text("Goodnight Moon")
            .attr("x", w/2 - 120)
            .attr("y", h / 2)
            .attr("font-size", "30px")
            .attr("fill", "white");

    </script>
        
        <br><!--add a line break-->
        <br><!--add a line break-->

    <script type="text/javascript">
    ////////////////////////////////
    /* PART 2: BASIC BAR GRAPH */
    ///////////////////////////////
    
    var useThisData = [];
    var manualData = [5,10,15,20,25,30,35,40,45,50]

    useThisData = manualData;
    var graphLabel = [];
    for(var i = 0; i < useThisData.length; i++){
        var newLabel = "bar " + (i+1);
        graphLabel.push(newLabel);
    }

    var bbgCanvas = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h + 50 + 100)

    var bbgTitle = bbgCanvas.append("svg")
                            .attr("width", w)
                            .attr("height", 50);

    var bbgGraph = bbgCanvas.append("svg")
                            .attr("width", w)
                            .attr("height", h + 100)
                            .attr("x", 0)
                            .attr("y", 0);

    bbgTitle.append("text")
            .text("Basic Bar Graph")
            .attr("y", 30)
            .attr("font-family", "sans-serif")
            .attr("font-size", "30px");

    bbgGraph.selectAll("rect")
            .data(useThisData)
            .enter()
            .append("rect")
            .attr("x", function(d, i){
                return i*(w/useThisData.length);
            })
            .attr("y", function(d){
                return h - d * 4;
            })
            .attr("width", w / useThisData.length * 7 / 8)
            .attr("height", function(d){
                return d * 4;
            })
            .attr("fill", function(d){
                return "rgba(65, 21, 48, " + d*5/200 + ")";
            });

    //Label the graph
    bbgGraph.selectAll("text")
            .data(useThisData)
            .enter()
            .append("text")
            .text(function(d){
                return d;
            })
            .attr("x", function(d, i){
                return i * (w / useThisData.length) + w / useThisData.length * 7 / 8 / 2;
            })
            .attr("y", function(d){
                return h - (d * 4) - 5;
            })
            .attr("font-family", "sans-serif")
            .attr("font-size", "25px")
            .attr("text-anchor", "middle");

    bbgGraph.selectAll("text.label")
            .data(graphLabel)
            .enter()
            .append("text")
            .text(function(d){
                return d;
            })
            .attr("x", function(d,i){
                return i * (w / useThisData.length);
            })
            .attr("y", function(d,i){
                return h + 100;
            })
            .attr("font-family", "sans-serif")
            .attr("font-size", "20px")
            .attr("dy", "-4.0em")
            .attr("transform", function(d,i){
                return "rotate(-90," + ((i * w / useThisData.length) + 45) + "," + (h+20) + ")";
            });

    </script>
        
    <br><!--add a line break-->
    <br><!--add a line break-->
        
    <script type="text/javascript">
    ////////////////////////////////
    /* PART 3: USING REAL DATA */
    ///////////////////////////////
    </script>
</body>
</html>
